import { createMocks } from 'node-mocks-http';

import {{pascalCase name}} from 'pages/api/{{kebabCase name}}';

describe('/api/{{kebabCase name}}', () => {
  it('should return a 200 response', async () => {
    const { req, res } = createMocks({
      method: 'GET',
      url: '/api/{{kebabCase name}}',
    });

    await {{pascalCase name}}(req, res);

    expect(res.statusCode).toBe(200);
  });

  it('should return a JSON response', async () => {
    const { req, res } = createMocks({
      method: 'GET',
      url: '/api/{{kebabCase name}}',
    });

    await {{pascalCase name}}(req, res);

    const response = JSON.parse(res._getData());

    expect(response).toEqual({ name: 'John Doe' });
  });
});
